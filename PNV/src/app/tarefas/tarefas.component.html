<!--<p-button label="Click" (onClick)="teste()"></p-button>-->
<p-table [value]="tarefas" editMode="row">
  <ng-template  pTemplate="caption">
  </ng-template>
  <ng-template  pTemplate="header">
      <tr>
          <th>Tarefa</th>
          <th>Inicio Previsto</th>
          <th>Inicio</th>
          <th>Final Previsto</th>
          <th>Final</th>
          <th>Responsável</th>
          <th>Concluída</th>
          <th style="width:8em; text-align: center;">
            <button type="button" icon="ui-icon-add" pButton routerLink="/cadastrar"></button>
          </th>
        </tr>
  </ng-template>
  <ng-template  pTemplate="body" let-rowData let-editing="editing"  >
      <tr *ngFor="let tarefa of tarefas"   [pEditableRow]="rowData" [class.success]="tarefa.estaConcluida()">
          <td tarefaConcluida [tarefa]="tarefa">
            {{ rowData.getNome() }}
          </td>
          
          <td pEditableColumn>
              <p-cellEditor>
                  <ng-template pTemplate="input">
                      <!--<p-dropdown [options]="tarefa.getDataInicio" [(ngModel)]="tarefa.getDataInicio" [style]="{'width':'100%'}"></p-dropdown>-->
                      <input pInputText type="text" [(ngModel)]="rowData.InicioPrevisto">
                  </ng-template>
                  <ng-template pTemplate="output">
                      {{rowData.getInicioPrevisto()}}
                  </ng-template>
              </p-cellEditor>
          </td>

          <td pEditableColumn>
              <p-cellEditor>
                  <ng-template pTemplate="input">
                      <!--<p-dropdown [options]="tarefa.getDataInicio" [(ngModel)]="tarefa.getDataInicio" [style]="{'width':'100%'}"></p-dropdown>-->
                      <input pInputText type="text" [(ngModel)]="rowData.dataInicio">
                  </ng-template>
                  <ng-template pTemplate="output">
                      {{rowData.getDataInicio()}}
                  </ng-template>
              </p-cellEditor>
          </td>

          <td pEditableColumn>
              <p-cellEditor>
                  <ng-template pTemplate="input">
                      <!--<p-dropdown [options]="tarefa.getDataInicio" [(ngModel)]="tarefa.getDataInicio" [style]="{'width':'100%'}"></p-dropdown>-->
                      <input pInputText type="text" [(ngModel)]="rowData.conclusaoPrevista">
                  </ng-template>
                  <ng-template pTemplate="output">
                      {{rowData.getConclusaoPrevista()}}
                  </ng-template>
              </p-cellEditor>
          </td>

          <td pEditableColumn>
              <p-cellEditor>
                  <ng-template pTemplate="input">
                      <!--<p-dropdown [options]="tarefa.getDataInicio" [(ngModel)]="tarefa.getDataInicio" [style]="{'width':'100%'}"></p-dropdown>-->
                      <input pInputText type="text" [(ngModel)]="rowData.dataConclusao">
                  </ng-template>
                  <ng-template pTemplate="output">
                      {{rowData.getDataConclusao()}}
                  </ng-template>
              </p-cellEditor>
          </td>

          <td pEditableColumn>
              <p-cellEditor>
                  <ng-template pTemplate="input">
                      <!--<p-dropdown [options]="tarefa.getDataInicio" [(ngModel)]="tarefa.getDataInicio" [style]="{'width':'100%'}"></p-dropdown>-->
                      <input pInputText type="text" [(ngModel)]="rowData.responsavel">
                  </ng-template>
                  <ng-template pTemplate="output">
                      {{rowData.getResponsavel()}}
                  </ng-template>
              </p-cellEditor>
          </td>

          
          <td style="width: 70px" class="text-center">
              <input (click)="alterarStatus(tarefa)" type="checkbox" [value]="tarefa.getId()" [checked]="tarefa.estaConcluida()">
            </td>

          <td style="text-align:center;">
              <button *ngIf="!editing" pButton type="button" pInitEditableRow  class="ui-button-info" (click)="onRowEditInit(rowData)"><i class="material-icons">mode_edit</i></button>
              <button *ngIf="editing" pButton type="button" pSaveEditableRow icon="pi pi-check" class="ui-button-success" style="margin-right: .5em" (click)="onRowEditSave(rowData)"></button>
              <button *ngIf="editing" pButton type="button" pCancelEditableRow icon="pi pi-times" class="ui-button-danger" (click)="onRowEditCancel(rowData, ri)"></button>
          </td>
          <!--<td class="text-center" style="width: 200px">
            <a [routerLink]="['/tarefas/editar', tarefa.getId()]" title="Editar" alt="Editar" class="btn btn-xs btn-primary">
              <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
            </a>
            <a (click)="remover($event, tarefa)" href="#" title="Remover" alt="Remover" class="btn btn-xs btn-danger">
              <span class="glyphicon glyphicon-trash" aria-hidden="true"></span>
            </a>
          </td>-->
        </tr>
  </ng-template>
</p-table>
<div *ngIf="!temTarefas()" class="alert alert-info text-center">Nenhuma tarefa cadastrada.</div>